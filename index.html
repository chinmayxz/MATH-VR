<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0"/>
<title>VR Math Trivia</title>
<script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
<style>
  body { margin:0; overflow:hidden; font-family: Arial, Helvetica, sans-serif; background:#07192b; }
  #ui { position:absolute; top:0; left:0; width:100%; height:100%; pointer-events:none; z-index:10; }
  #startScreen,#categoryScreen,#gameScreen,#resultsScreen {
      position:absolute; top:50%; left:50%; transform:translate(-50%,-50%);
      background: rgba(0,20,40,0.95); padding:30px; border-radius:18px; text-align:center;
      pointer-events:all; box-shadow:0 10px 50px rgba(0,255,255,0.12); border:1px solid rgba(0,255,255,0.08);
      max-width:640px; z-index:11;
  }
  h1 { color:#00ffff; margin:0 0 18px 0; font-size:2.1em; text-shadow:0 0 8px #00b7c7; }
  h2 { color:#00ddff; margin:0 0 16px 0; font-size:1.6em; }
  button { background: linear-gradient(135deg, #0066cc, #00ccff); color:white; border:none; padding:12px 22px; margin:10px; font-size:1.05em; border-radius:10px; cursor:pointer; transition:all 0.22s; pointer-events:all; box-shadow:0 6px 18px rgba(0,200,255,0.14); }
  button:hover { transform:translateY(-2px); box-shadow:0 8px 24px rgba(0,200,255,0.2); }
  button:active { transform:translateY(0); }

  .category-btn { display:block; width:100%; margin:12px 0; padding:14px 18px; font-size:1.05em; border-radius:14px; text-align:left; }

  /* Answer buttons fixes */
  #answers { display:flex; flex-direction:column; align-items:stretch; margin-top:12px; z-index:12; }
  .answer-btn {
      display:block; width:100%; text-align:left; padding:14px 20px; margin:10px 0;
      background: linear-gradient(135deg,#1a5080,#2a7090); color:#fff; border:none;
      font-size:1.05em; border-radius:28px; cursor:pointer; transition:all 0.18s;
      box-shadow:0 6px 18px rgba(0,0,0,0.25); position:relative; z-index:12;
  }
  .answer-btn:hover { transform:translateY(-2px); }
  .answer-btn.correct { background: linear-gradient(135deg,#00aa00,#00ff66); color:#002200; box-shadow:0 8px 28px rgba(0,255,128,0.12); }
  .answer-btn.incorrect { background: linear-gradient(135deg,#aa0000,#ff6666); color:#330000; box-shadow:0 8px 28px rgba(255,60,60,0.12); }

  #score { color:#ffff00; font-size:1.15em; margin:10px 0; text-shadow:0 0 4px #ffff00; }
  #progress { color:#aaddff; font-size:1.05em; margin:8px 0; }
  .hidden { display:none; }
  p { color:#aaddff; font-size:1.05em; margin:12px 0; }
  #vrButton { position:absolute; top:18px; right:18px; pointer-events:all; background:linear-gradient(135deg,#8a2be2,#9370db); z-index:100; padding:10px 14px; border-radius:10px; color:white; border:none; box-shadow:0 6px 18px rgba(0,0,0,0.3); }
  #vrButton:hover { background: linear-gradient(135deg,#9b30ff,#a07aff); }
  #vrButton.vr-active { background: linear-gradient(135deg,#ff4500,#ff6347); }

  #controls { position:absolute; bottom:18px; left:18px; color:white; background:rgba(0,0,0,0.45); padding:10px; border-radius:8px; pointer-events:none; z-index:100; font-size:0.95em; }
  #feedback { margin-top:8px; font-size:1.05em; color:#ffcc66; min-height:1.4em; }

  @media (max-width:520px){
    #startScreen,#categoryScreen,#gameScreen,#resultsScreen{ padding:20px; max-width:92%; }
    h1{ font-size:1.6em; }
  }
</style>
</head>
<body>
<div id="ui">
  <div id="startScreen">
      <h1>üåä Math Trivia üåä</h1>
      <p>Test your math knowledge</p>
      <button onclick="showCategories()">Start Game</button>
  </div>

  <div id="categoryScreen" class="hidden">
      <h2>Choose Your Category</h2>
      <button class="category-btn" onclick="startGame('geometry')">üìê Geometry</button>
      <button class="category-btn" onclick="startGame('algebra')">üî¢ Algebra</button>
      <button class="category-btn" onclick="startGame('calculus')">üìä Calculus</button>
  </div>

  <div id="gameScreen" class="hidden">
      <div id="score">Score: 0</div>
      <div id="progress">Question 1/3</div>
      <div id="question" style="color:#e6f7ff; font-size:1.2em; margin:12px 0;"></div>
      <div id="answers"></div>
      <div id="feedback"></div>
  </div>

  <div id="resultsScreen" class="hidden">
      <h1>Round Complete! üéâ</h1>
      <div id="finalScore" style="color:#fff; font-size:1.15em; margin:10px 0;"></div>
      <button onclick="showCategories()">Play Again</button>
      <button onclick="location.reload()">Main Menu</button>
  </div>

  <button id="vrButton" onclick="toggleVR()">Enter VR Mode</button>
</div>

<div id="controls">
  <p>Point controller at buttons to select in VR</p>
  <p>Drag to look around (Desktop)</p>
</div>

<script>
/* ------------------ VR/Three.js Scene ------------------ */
let scene = new THREE.Scene();
let camera = new THREE.PerspectiveCamera(75, window.innerWidth/window.innerHeight, 0.1, 1000);
let renderer = new THREE.WebGLRenderer({antialias:true});
renderer.setSize(window.innerWidth, window.innerHeight);
document.body.appendChild(renderer.domElement);

let geometry = new THREE.BoxGeometry();
let material = new THREE.MeshStandardMaterial({color:0x00ffff});
let cube = new THREE.Mesh(geometry, material);
scene.add(cube);

let light = new THREE.DirectionalLight(0xffffff, 1);
light.position.set(5,10,7);
scene.add(light);

camera.position.z = 5;

function animate(){
    requestAnimationFrame(animate);
    cube.rotation.x += 0.01;
    cube.rotation.y += 0.01;
    renderer.render(scene, camera);
}
animate();

/* ------------------ VR toggle ------------------ */
function toggleVR(){
    if(renderer.xr.enabled){
        renderer.xr.enabled = false;
        document.getElementById('vrButton').classList.remove('vr-active');
        document.getElementById('vrButton').innerText = "Enter VR Mode";
    } else {
        renderer.xr.enabled = true;
        document.getElementById('vrButton').classList.add('vr-active');
        document.getElementById('vrButton').innerText = "Exit VR Mode";
        document.body.appendChild(THREE.WEBXR.createButton(renderer));
    }
}

/* ------------------ Quiz Logic ------------------ */
let questions = [
    {q:"2+2=?", a:["3","4","5","6"], correct:1},
    {q:"5x3=?", a:["15","10","8","12"], correct:0},
    {q:"10-4=?", a:["6","5","7","4"], correct:0},
];

let currentQ = 0, score = 0;

function showCategories(){
    document.getElementById('startScreen').classList.add('hidden');
    document.getElementById('resultsScreen').classList.add('hidden');
    document.getElementById('categoryScreen').classList.remove('hidden');
}

function startGame(category){
    currentQ=0; score=0;
    document.getElementById('categoryScreen').classList.add('hidden');
    document.getElementById('gameScreen').classList.remove('hidden');
    showQuestion();
}

function showQuestion(){
    let q = questions[currentQ];
    document.getElementById('question').innerText = q.q;
    document.getElementById('score').innerText = "Score: "+score;
    document.getElementById('progress').innerText = "Question "+(currentQ+1)+"/"+questions.length;

    let answersDiv = document.getElementById('answers');
    answersDiv.innerHTML="";
    q.a.forEach((ans,i)=>{
        let btn = document.createElement('button');
        btn.className='answer-btn';
        btn.innerText=ans;
        btn.onclick=()=>checkAnswer(i);
        answersDiv.appendChild(btn);
    });
    document.getElementById('feedback').innerText="";
}

function checkAnswer(selected){
    let q = questions[currentQ];
    let buttons = document.querySelectorAll('.answer-btn');
    if(selected===q.correct){
        buttons[selected].classList.add('correct');
        document.getElementById('feedback').innerText="‚úÖ Correct!";
        score+=1;
    } else {
        buttons[selected].classList.add('incorrect');
        buttons[q.correct].classList.add('correct');
        document.getElementById('feedback').innerText="‚ùå Wrong!";
    }
    currentQ++;
    setTimeout(()=>{ 
        if(currentQ<questions.length) showQuestion();
        else showResults();
    },800);
}

function showResults(){
    document.getElementById('gameScreen').classList.add('hidden');
    document.getElementById('resultsScreen').classList.remove('hidden');
    document.getElementById('finalScore').innerText = "You scored "+score+" / "+questions.length;
}
</script>
</body>
</html>
